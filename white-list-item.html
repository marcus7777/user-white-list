<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<!--
`<white-list-item style="display:block" white-list="{{item}}"></white-list-item>`
-->
<dom-module id="white-list-item">
  <template>
    <template is="dom-if" if="{{edit}}">
      <paper-input char-counter maxlength="25" value="{{whiteList.link::change}}" label="Domain"></paper-input>
      <paper-icon-button style="color:gray; float:right; right: -50px; top: 15px;" icon="delete" aria-label="Delete white-list Item" on-tap="_onDelete"></paper-icon-button>
    </template>
    <div style="margin-bottom: 30px;">
      [[whiteList.link]]
    </div>
  </template>
</dom-module>
<script>
var shown
Polymer({
  is: 'white-list-item',
  _onDelete: function() {
    this.fire('delete-white-list-item', {
      white-list: this.white-list
    });
  },
  yes: function() {
    this.set("whiteList.answer", this.Yes)
    this.set("whiteList.isComplete", true)
  },
  no: function() {
    this.set("whiteList.answer", this.No)
    this.set("whiteList.isComplete", true)
  },
  properties: {
    edit: {
      type: Boolean,
      value: false
    },
    answer: {
      type: Boolean,
      value: false
    },
    answered: {
      type: Boolean,
      value: false
    },
    No: {
      value: 'No'
    },
    Yes: {
      value: 'Yes'
    },
    white-list: {
      notify: true
    },
    showOnce: {
      computed: "getShowOnce(edit, answer, index)"
    }
  },
  getShowOnce: function(edit, answer, index) {
    if (!shown && index === 0) {
      shown = true
      return (!edit && answer)
    } else {
      return false
    }
  },
  getShowOnce(question, edit, answer) {
    return (!edit && answer)
  },
  _onDelete: function() {
    this.fire('delete-white-list', {
      whiteList: this.whiteList
    });
  }
});
</script>
